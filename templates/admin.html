{% extends "base.html" %}
{% block content %}
<h1>Admin Paneli</h1>
{% if error %}<div class="alert">{{ error }}</div>{% endif %}

<section class="card">
  <h2>Yeni Kullanıcı Oluştur</h2>
  <form method="post" action="/admin/create-user" class="grid">
    <div>
      <label>Kullanıcı Adı</label>
      <input name="username" required />
    </div>
    <div>
      <label>Şifre</label>
      <input name="password" required />
    </div>
    <div>
      <label>Rol</label>
      <select name="role">
        <option value="user">user</option>
        <option value="admin">admin</option>
      </select>
    </div>
    <div class="row-end">
      <button class="btn" type="submit">Oluştur</button>
    </div>
  </form>
</section>

<section class="card">
  <h2>Kullanıcılar</h2>
  <div class="table">
    <div class="thead">
      <div>ID</div><div>Kullanıcı Adı</div><div>Rol</div><div>Oluşturma</div>
    </div>
    {% for u in users %}
    <div class="trow">
      <div>{{ u.id }}</div>
      <div>{{ u.username }}</div>
      <div>{{ u.role }}</div>
      <div>{{ u.created_at }}</div>
    </div>
    {% endfor %}
  </div>
</section>
{% endblock %}

{% extends "base.html" %}
{% block content %}
<section class="stack gap-6">
  <div class="card card-padded">
    <h2 class="h2 mb-2">Kullanıcı Oluştur</h2>
    <form id="user-form" class="grid-3 gap-3">
      <label class="field">
        <span class="label">Kullanıcı Adı</span>
        <input name="username" type="text" required />
      </label>
      <label class="field">
        <span class="label">Şifre</span>
        <input name="password" type="password" required />
      </label>
      <label class="field">
        <span class="label">Rol</span>
        <select name="role" required>
          <option value="user" selected>user</option>
          <option value="admin">admin</option>
        </select>
      </label>
      <div class="col-span-3">
        <button class="btn btn-primary" type="submit">Ekle</button>
      </div>
    </form>
  </div>

  <div class="card card-padded">
    <div class="flex-between mb-2">
      <h2 class="h2">Kullanıcılar</h2>
      <button id="refresh-users" class="btn btn-ghost small">Yenile</button>
    </div>
    <div class="table-wrap">
      <table class="table">
        <thead>
          <tr>
            <th>ID</th><th>Kullanıcı</th><th>Rol</th><th>Oluşturulma</th><th></th>
          </tr>
        </thead>
        <tbody id="user-rows">
          <tr><td colspan="5" class="muted">Yükleniyor…</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
<script>
  window.__ADMIN_ENDPOINTS__ = {
    list: "/admin/users",
    create: "/admin/users",
    remove: (id) => `/admin/users/${id}`
  };
</script>
{% endblock %}

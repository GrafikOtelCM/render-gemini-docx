{% extends "base.html" %}
{% block content %}
<div class="grid-2">
  <section class="card">
    <div class="card-header">Plan Oluştur</div>
    <div class="card-body">
      <form id="planForm" method="POST" action="/plan" enctype="multipart/form-data">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
        <div class="form-group">
          <label for="hotel_name">Otel Adı</label>
          <input id="hotel_name" name="hotel_name" type="text" required placeholder="Örn: Martı Prime">
        </div>

        <div class="form-group">
          <label for="plan_month">Planlama Ayı</label>
          <input id="plan_month" name="plan_month" type="month" required>
        </div>

        <div class="form-group">
          <label for="interval_days">Kaç günde bir paylaşım?</label>
          <select id="interval_days" name="interval_days" required>
            <option value="1">Her gün</option>
            <option value="2">2 günde bir</option>
            <option value="3">3 günde bir</option>
            <option value="4">4 günde bir</option>
            <option value="5">5 günde bir</option>
            <option value="7">Haftada bir</option>
          </select>
        </div>

        <div class="form-group">
          <label for="images">Görseller (en fazla 10 önerilir)</label>
          <input id="images" name="images" type="file" accept="image/*" multiple required />
          <small id="fileCount">Seçili dosya: 0</small>
        </div>

        <div class="form-group">
          <label for="tone">Açıklama Tonu</label>
          <select id="tone" name="tone">
            <option>Kurumsal</option>
            <option>Samimi</option>
            <option>Dinamik</option>
          </select>
        </div>

        <button type="submit" class="btn btn-primary">Oluştur &amp; İndir</button>
      </form>
    </div>
  </section>

  <section class="card">
    <div class="card-header">Kullanım &amp; Limit</div>
    <div class="card-body">
      <div class="stat-row">
        <div>Bu Ay Oluşturulan DOCX</div>
        <strong>{{ stats.month_docs or 0 }}</strong>
      </div>
      <div class="stat-row">
        <div>Tahmini Maliyet (₺)</div>
        <strong>{{ stats.estimate_try or '—' }}</strong>
      </div>
      <div class="muted">* Maliyet tahmini ENV oranlarına göre hesaplanır.</div>
    </div>
  </section>
</div>

<script>
  const images = document.getElementById('images');
  const fileCount = document.getElementById('fileCount');
  if (images && fileCount) {
    images.addEventListener('change', () => {
      fileCount.textContent = `Seçili dosya: ${images.files.length}`;
    });
  }
</script>
{% endblock %}
